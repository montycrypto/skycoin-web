<div class="-actions">
  <ng-container *ngIf="!wallet.isHardware">
    <div class="btn-add-address -button -not-on-small-and-below" (click)="onAddNewAddress()" [ngClass]="{ 'mouse-disabled': creatingAddress }">
      <span [ngClass]="{ '-btn-plus -img': !creatingAddress, '-disabled-span': creatingAddress, '-enabled-span': !creatingAddress }">
        <mat-spinner *ngIf="creatingAddress" [color]="spinnerStyle" class="in-button small"></mat-spinner>
        {{ 'wallet.new-address' | translate }}
      </span>
    </div>
    <div class="-button" (click)="onToggleEmpty()">
      <ng-container *ngIf="!wallet.hideEmpty">
        <span class="-img -btn-minus -hide-empty -enabled-span">{{ 'wallet.hide-empty' | translate }}</span>
      </ng-container>
      <ng-container *ngIf="wallet.hideEmpty">
        <span class="-img -btn-plus -show-empty -enabled-span">{{ 'wallet.show-empty' | translate }}</span>
      </ng-container>
    </div>
  </ng-container>
  <div *ngIf="wallet.isHardware" class="btn-delete-wallet -button -not-on-small-and-below" (click)="onDeleteWallet()">
    <span class="-img -btn-delete -enabled-span">{{ 'wallet.delete' | translate }}</span>
  </div>
  <div class="flex-fill"></div>
  <div class="-button -not-on-small-and-below" (click)="onEditWallet()">
    <span [ngClass]="{ '-img -btn-edit -enabled-span': !preparingToEdit, '-disabled-span': preparingToEdit }">
      <mat-spinner *ngIf="preparingToEdit" class="in-button small"></mat-spinner>
      {{ 'wallet.edit' | translate }}
    </span>
  </div>
  <div *ngIf="!wallet.isHardware" class="btn-delete-wallet -button -not-on-small-and-below" (click)="onDeleteWallet()">
    <span class="-img -btn-delete -enabled-span">{{ 'wallet.delete' | translate }}</span>
  </div>
  <div class="-button -on-small-and-below-only" (click)="onShowOptions()">
    <span [ngClass]="{ '-img -btn-options -enabled-span': !preparingToEdit, '-disabled-span': preparingToEdit }">
      <mat-spinner *ngIf="preparingToEdit" class="in-button small"></mat-spinner>
      {{ 'wallet.options' | translate }}
    </span>
  </div>
</div>

<div class="-records">
  <ng-container *ngFor="let address of (wallet ? wallet.addresses : []); let i = index">
    <div class="-record" *ngIf="!wallet.hideEmpty || address.balance.isGreaterThan(0)" #element (click)="onShowQrIfPointer(element, address, i)">
      <div class="id-column -one-line-ellipsis">{{ i + 1 }}</div>
      <div class="address-column -not-on-small-and-below">
        <ng-container *ngIf="!wallet.isHardware || address.confirmed">
          <img class="qr-code-button" src="assets/img/qr-code-black.png" (click)="onShowQr(address)" >
          <p class="click-to-copy" [ngClass]="{ copying: address.isCopying }"
              [clipboard]="address.address" (copyEvent)="onCopySuccess(address)" (mouseleave)="address.isCopying = false">
            {{ address.address }}
            <mat-spinner class="in-text" *ngIf="confirmingIndex === i"></mat-spinner>
            <span [attr.data-label]="'wallet.address.copied' | translate" class="copy-label">
              {{ 'wallet.address.copy' | translate }}
            </span>
          </p>
        </ng-container>
        <ng-container *ngIf="wallet.isHardware && !address.confirmed">
          <p class="click-to-copy" (click)="confirmAddress(address, i, true)">
            <span class="truncated-address">{{ address.address }}</span>
            <span class="copy-label unconfirmed-label">
              {{ 'wallet.address.show' | translate }}
              <mat-spinner class="in-text" *ngIf="confirmingIndex === i"></mat-spinner>
            </span>
          </p>
        </ng-container>
      </div>
      <div class="address -one-line-ellipsis -on-small-and-below-only -full-width">
        <span *ngIf="!wallet.isHardware || address.confirmed">
          {{ address.address }}
        </span>
        <ng-container *ngIf="wallet.isHardware && !address.confirmed">
          <mat-spinner class="in-text" *ngIf="confirmingIndex === i"></mat-spinner>
          <span class="copy-label unconfirmed-label">
            {{ 'wallet.address.show' | translate }}
          </span>
        </ng-container>
      </div>
      <div class="mobile-label-container">
        <div class="data-column -coins-column">{{ (address.balance ? address.balance.decimalPlaces(6).toString() : 0) | number:'1.0-6' }}</div>
      </div>
      <div class="mobile-label-container">
        <div class="data-column -hours-column">{{ (address.hours ? address.hours.decimalPlaces(0).toString() : 0) | number:'1.0-0' }}</div>
      </div>
      <div class="options-column -not-on-small-and-below">
        <mat-icon [matMenuTriggerFor]="optionsMenu">more_vert</mat-icon>
      </div>
    </div>
    <mat-menu #optionsMenu="matMenu" [overlapTrigger]="false" class="compact">
      <button mat-menu-item [clipboard]="address.address"
        (click)="$event.stopPropagation()" (copyEvent)="onCopySuccess(address, 1000)" *ngIf="!wallet.isHardware || address.confirmed">
        {{ address.isCopying ? ('wallet.address.copied' | translate) : 'wallet.address.copy-address' | translate}}
      </button>
      <button mat-menu-item (click)="confirmAddress(address, i, !address.confirmed)" *ngIf="wallet.isHardware">
        {{ 'wallet.address.confirm' | translate }}
      </button>
      <button mat-menu-item routerLink="/settings/outputs" [queryParams]="{ addr: address.address }">
        {{ 'wallet.address.outputs' | translate }}
      </button>
      <button mat-menu-item routerLink="/history" [queryParams]="{ addr: address.address }">
        {{ 'wallet.address.history' | translate }}
      </button>
    </mat-menu>
  </ng-container>
  <div class="-record -small-adding-addess-msg-container -on-small-and-below-only" *ngIf="creatingAddress">
    <div>
      <mat-spinner [color]="spinnerStyle" class="in-button small"></mat-spinner>
      {{ 'wallet.adding-address' | translate }} <span *ngIf="showSlowMobileInfo">{{ 'common.slow-on-mobile' | translate}}</span>
    </div>
  </div>
</div>
